> 首先说HUB,也就是集线器。它的作用可以简单的理解为将一些机器连接起来组成一个局域网。而交换机（又名交换式集线器）作用与集线器大体相同。但是两者在性能上有区别：集线器采用的是共享带宽的工作方式，而交换机是独享带宽。这样在机器很多或数据量很大时，两者将会有比较明显的。而路由器与以上两者有明显区别，它的作用在于连接不同的网段并且找到网络中数据传输最合适的路径，可以说一般情况下个人用户需求不大。路由器是产生于交换机之后，就像交换机产生于集线器之后，所以路由器与交换机也有一定联系，并不是完全独立的两种设备。路由器主要克服了交换机不能路由转发数据包的不足。

### Hub

集线器就是最简单的设备，但是不能过滤数据，并且是共享带宽，所以在这个局域网内，所有设备都会接受到hub的数据。一般用于数据交换不大的情况下。

### Bridge

就是网桥，在一个可以访问的网络中，从这个机器可以连上另外的网络，网桥比集线器复杂可以重定向数据，工作在数据链路层。

### Switch

与网桥相比，交换机具有多个端口。 交换机可以在转发数据之前执行错误检查，这通过不转发错误结束的分组或仅将正确分组选择性地转发到正确的设备来非常有效。

交换机可以支持第2层（基于MAC地址）和第3层（基于IP地址），具体取决于交换机的类型。 通常大型网络使用交换机而不是集线器连接同一子网内的计算机。

### Router

路由器，像交换机根据地址转发数据包。 通常，路由器使用IP地址转发数据包，这允许网络跨越不同的协议。 路由器基于软件转发分组，而交换机（例如，层3）使用称为ASIC（专用集成电路）的硬件转发。 路由器支持不同的WAN技术，但交换机不支持。
此外，无线路由器具有内置的接入点。路由器最常见的家庭使用是共享宽带互联网连接。 由于路由器具有与网络共享的公共IP地址，当数据通过路由器时，它被转发到正确的计算机。



### 使用区别

交换机工作于数据链路层，用来隔离冲突域，连接的所有设备同属于一个广播域（子网），负责子网内部通信。

路由器工作于网络层，用来隔离广播域（子网），连接的设备分属不同子网，工作范围是多个子网之间，负责网络与网络之间通信。

\------------------------------------------------------

举个例子：

家用宽带路由器，其实是交换机和路由器的结合体，有两个网络层接口，一个连接运营商网络，物理上也就是wan口，IP地址由运营商分配。另一个连接家庭网络，没有物理接口，IP地址由自己通过路由器管理界面配置，一般默认是192.168.1.1

那另外几个Lan口干什么用的？这就是交换机接口，和家庭网络接口相连，负责家庭网络内部通信。



==== 从 **课本上的定义** 的角度来划分：

- 交换机

- - 用于同一网络内部数据的快速传输
  - 转发决策通过查看二层头部完成
  - 转发不需要修改数据帧
  - 工作在 TCP/IP 协议的二层 —— 数据链路层
  - 工作简单，直接使用硬件处理

- 路由器

- - 用于不同网络间数据的跨网络传输
  - 转发决策通过查看三层头部完成
  - 转发需要修改 TTL ，IP 头部校验和需要重新计算，数据帧需要重新封装
  - 工作在 TCP/IP 协议的三层 —— [网络层](https://www.zhihu.com/search?q=网络层&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A18345838})
  - 工作复杂，使用软件处理

*// 应该说，这个定义已经很过时了，三层(多层）交换机早就已经普遍使用了，但是天知道什么原因，至少我手头的某一本课本还是这样说的。*



这是许多课本上的标准解答，在传统上来讲也是正确的。

- 由于交换机只需要查看 二层数据帧 的头部即可决策转发地址，策略十分简单，可以直接通过硬件芯片实现相应功能，所以可以做到廉价高速，被大量应用在接入层。
- 而路由器由于需要处理跨网络的连接，必须在接收到完整的 IP数据包 后才能转发数据，[路由协议](https://www.zhihu.com/search?q=路由协议&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A18345838})又比较复杂，所以只能使用软件的方式实现相应的功能，要达到高性能只能付出更高的价格。

另外，由于二层转发只需要查看 帧头部 即可开始转发，也使得 (二层)交换机 有了一项独门功夫：直通转发。简单说就是只接收数据帧头部就开始转发，从而达到更高的性能。



==== 从 **转发模式** 的角度来划分：

> *Tips: 这里只讨论三层(多层)交换机，二层同上一条*

- 交换机

- - 硬件处理交换 (转发) 过程
  - 一次路由(寻路)，多次交换(转发)

- 路由器

- - 软件处理交换 (转发) 过程
  - 一次路由(寻路)，一次交换(转发)

*// 据说也有纯软件转发的[三层交换机](https://www.zhihu.com/search?q=三层交换机&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A18345838})，暂不讨论*

虽然上面写的是软/硬件的区别，实际上更多的是工作模式上的区别：

- 三层(多层)交换机并非纯硬件工作，而是有单独的[路由引擎](https://www.zhihu.com/search?q=路由引擎&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A18345838})，但是路由引擎并非一直工作，而是在第一次通信的时候通过路由引擎查询[路由表](https://www.zhihu.com/search?q=路由表&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A18345838})，建立转发表，之后的数据不再经过路由引擎，而是通过与二层类似的交换引擎进行转发。

- - 由于工作内容简单，转发引擎可以使用专门的硬件芯片来达到廉价高性能。

- 而路由器对每一个数据包都进行路由查询，占用大量资源，所以寻路效率较低，

- - 由于路由协议复杂，无法通过纯硬件芯片处理，造成大量数据转发时性能比不上三层(多层)交换机。

> Tips: 事实上路由器方面也有类似的技术，例如思科快速转发机制(CEF-Cisco Express Forwarding)

也正是工作模式上的差异，造成了他们在实际应用时的一些区别：

- 三层(多层)交换机的路由引擎较弱，相比路由器支持的路由协议有限。
- 同样由于三层(多层)交换机的路由引擎较弱，且转发表有限，不适合复杂的多网络互联。
- 因为并不是每一个包都会经过路由引擎，三层(多层)交换机的路由策略功能较弱。
- 三层(多层)交换机更适合网络结构简单，交换数据量大的情景下使用（例如小型网络的汇聚层）
- 路由器更适合复杂的多网络互联的核心交换区域。
